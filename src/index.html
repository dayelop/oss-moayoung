<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <link rel="icon" type="image/png" href="assets/chat.png">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <meta name="description" content="@@description"/>
        <meta name="keywords" content="@@keywords"/>
        <title>@@title</title>
        <meta property="og:title" content="@@title" />
        <meta property="og:description" content="@@description">
        <meta property="og:image" content="@@image">
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="crossorigin="anonymous"></script>   
        <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-database.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-analytics.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.1.1/socket.io.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12"></script>
        <script src="assets/bundle.js?v=@@version"></script> 
    </head>
    <body>
        <div class="container maincontainer">
            <div class="mainrow">
                <div class="" id="main" style="display: none;">
                    <div id="video-area">
                        <div class="video-item" id="yourVideoArea">
                            <div class="video-wrap"> <!-- Video.ts -->
                                <div class="video-inner-wrap"> <!-- Video.ts -->
                                    <video id="yourVideo" autoplay muted playsinline></video> <!-- 비디오 -->
                                </div>
                            </div>
                        </div>
                        <div id="welcome" class="welcome-messages" v-bind:class="{'open': open}"> <!-- elements > welcome.ts--> <!-- #welcome -->
                            <div class="welcome-inner">
                                <span class="close fas fa-times" v-on:click="close"></span> <!-- welcome.ts에서 close 함수 -->
                                <div class="invite row" v-bind:class="{'show': showInvite}"> <!-- elements > welcome.ts-->
                                    <div class="col-xs-12 invite-header">{{inviteotherwithlink}}:</div> <!-- elements > welcome.ts / translator.ts -> "Invite other with this link" 딱 방 만들면 나오는 알림창 -->
                                    <div class="col-xs-12 invite-content">
                                        <input v-model="link" readonly type="text" id="invite-link-welcome"><button v-bind:class="{'fa-copy': !copied, 'fa-check': copied}" v-on:click="copy" class="fas"></button>
                                    </div>
                                </div>
                                <div class="setname row" v-bind:class="{'show': showSetName}">
                                    <div class="col-xs-12 setname-header">{{yournamelabel}}:</div> <!-- elements > welcome.ts / 처음 들어왔을 때 이름 설정-->
                                    <div class="col-xs-12 setname-content">
                                        <input v-model="name" @blur="changeUserinfo" autofocus placeholder="..." @keydown.enter.exact.prevent @keyup.enter.exact="close">
                                    </div>
                                </div>
                                <button v-bind:class="{'show': showSetName}" v-on:click="close" type="submit" data-lang="starting" class="button starting">Starting</button>
                                <div class="row"></div>
                            </div>
                        </div>
                    </div>
                    <div class="row center-xs" id="footer">
                        <div class="col-xs-12" id="controls"> <!-- 마이크, 카메라, 화면 공유, 채팅창, 통화 시작 버튼 --> <!-- controls.ts #controls--> <!-- css : 속성 -->
                            <span v-on:click="toogleMicrophone" v-bind:class="{'fa-microphone': microphoneOn, 'fa-microphone-slash': !microphoneOn}" class="microphone fas fa-microphone"></span>
                            <span v-on:click="toogleCamera" v-bind:class="{'fa-video': cameraOn, 'fa-video-slash': !cameraOn}" class="camera fas fa-video"></span>
                            <span v-on:click="toogleScreen" v-bind:class="{'screenon': screenOn, 'disabled': screenSharingNotAllowed}" class="screen fas fa-desktop"></span>
                            <span v-on:click="toogleOption" v-bind:class="{'optionon': optionOn, 'newMessage': hasNewMessage}" class="option fas fa-bars"></span>
                            <span v-on:click="toogleOption" v-bind:class="{'optiononclose': optionOn}" class="optionclose fas fa-times"></span>
                            <span v-on:click="hangOut"  v-bind:class="{'green': hangouted}" class="hangup fas fa-phone"></span>
                        </div>
                    </div>
                </div><div id="sidebar"> <!-- option창 눌렀을 때 옆에 뜨는 창 -->
                    <div class="tabs">
                        <div class="tabs-header row">
                            <div tab="chat" class="col-xs-3" data-lang="채팅">Chat</div>
                            <div tab="partner" class="col-xs-3" data-lang="참여자">Participant</div>
                            <div tab="settings" class="col-xs-3" data-lang="설정">Setting</div>
                            <div tab="Subtitle" class="col-xs-3" data-lang="자막">Subtitle</div>
                        </div>
                        <div class="tabs-content"> <!-- tab 하나 하나 -->
                            <div id="tab-chat">
                                <div id="textchat"> <!-- 채팅창 TextChat.ts #textchat-->
                                    <div class="msger">                              
                                        <div class="msger-chat">
                                        </div>
                                        <div class="msger-extrainfo" v-bind:class="{'hidden': !extrainfoVisible}">
                                            <span v-html="extrainfo"></span>
                                            <span class="close fas fa-times" v-on:click="closeExtra"></span>
                                        </div>
                                        <div class="msger-emoji-area" v-bind:class="{'hidden': !emojiVisible}">
                                            <span class="close fas fa-times" v-on:click="toogleEmoji"></span>
                                        </div>
                                        <form class="msger-inputarea" v-on:submit.prevent="sendMessage">
                                            <textarea v-model="message" type="text" class="msger-input" 
                                            :placeholder="[[yourmessage]]"
                                            @paste="addfilebypast"
                                            @keydown.enter.exact.prevent
                                            @keyup.enter.exact="sendMessage"></textarea>
                                            <label class="msger-emoji fas fa-grin-alt" @click="toogleEmoji"></label>
                                            <label class="msger-imgupload fas fa-file-image">
                                                <input type="file"  accept="image/*" @change="addfile">
                                            </label>
                                            <button type="submit" class="msger-send-btn fas fa-paper-plane"></button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div id="tab-partner"> <!-- participant 창  -->
                                <div id="invite" class="row">
                                    <div class="col-xs-12 invite-header">{{inviteotherwithlink}}:</div>
                                    <div class="col-xs-12 invite-content">
                                        <input v-model="link" readonly type="text" id="invite-link"><button v-bind:class="{'fa-copy': !copied, 'fa-check': copied}" v-on:click="copy" class="fas"></button>
                                    </div>
                                </div>
                                <div id="partnerlist">
                                    <ul>
                                        
                                    </ul>
                                </div>
                            </div>
                            <div id="tab-settings"> <!-- 설정창 : 이름, 마이크 .. 등-->
                                <div id="userinfo"> <!-- 이름 설정 -->
                                    <div class="row">
                                        <label class="col-xs-6" >{{namelabel}}:</label>
                                        <input class="col-xs-6" v-model="name" @blur="changeUserinfo" placeholder="..." >
                                    </div>
                                </div>
                                <div id="devices"> <!-- 마이크 설정 -->
                                    <div class="row">
                                        <label class="col-xs-6" >{{microphonelabel}}:</label>
                                        <select class="col-xs-6" v-model="audio" @change="onChange()">
                                            <option v-for="(option, index) in audiooptions" :key="index" v-bind:value="index">
                                            {{ option }}
                                            </option>
                                        </select>
                                    </div>
                                    <div class="row"> <!-- 비디오 설정 -->
                                        <label class="col-xs-6" >{{videolabel}}:</label>
                                        <select class="col-xs-6" v-model="video" @change="onChange()">
                                            <option v-for="(option, index) in videooptions" :key="index" v-bind:value="index">
                                            {{ option }}
                                            </option>
                                        </select>
                                    </div> 
                                    <div class="row sound" v-bind:class="{'allowed': soundAllowed}" > <!-- 스피커 설정 -->
                                        <label class="col-xs-6" >{{speakerlabel}}:</label>
                                        <select class="col-xs-6" v-model="sound" @change="onChange()">
                                            <option v-for="(option, index) in soundoptions" :key="index" v-bind:value="index">
                                            {{ option }}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                                <div id="configuration" v-if="soundEffectsEnabled"> <!-- 모르겠음 -->
                                    <div class="row" v-if="soundEffectsEnabled">
                                        <label class="col-xs-6" >{{soundeffectsLabel}}:</label>
                                        <input type="checkbox" v-model="soundEffectsOn" @change="toogleSoundEffects">
                                    </div>
                                </div>
                                <div id="settingSwitch"> <!-- 편의 기능 제어 -->
                                    <div class="settingTitle">
                                        <h2>편의 기능 제어</h2>
                                    </div>

                                    <div class="switchbox">
                                        <h4>얼굴 벗어남 감지</h4>
                                        <label class="switch"> <!-- 영화 ***-->
                                            <input type="checkbox">
                                            <span class="slider round"></span>
                                        </label>
                                   </div>
                                   <div class="switchbox">
                                       <h4>자막 추출</h4>
                                        <label class="switch"> <!-- 영화 ***-->
                                            <input type="checkbox">
                                            <span class="slider round"></span>
                                        </label>
                                    </div>
                                    <div class="switchbox">
                                        <h4>발화자 입 확대</h4>
                                        <label class="switch"> <!-- 영화 ***-->
                                            <input type="checkbox">
                                            <span class="slider round"></span>
                                        </label>
                                    </div>
                                    <div class="switchbox">
                                        <h4>참여자 음성 알림</h4>
                                        <label class="switch"> <!-- 영화 ***-->
                                            <input type="checkbox">
                                            <span class="slider round"></span>
                                        </label>
                                    </div>
                                </div>
                                <!-- 링크 두개 : Build your own video chat, report bug--> 
                           <!--     <div id="linkarea"> 
                                    <div class="row"> 
                                        <a target="_blank" href="https://github.com/vgiselbrecht/chat#own-installation">
                                            <span class="fas fa-plus-circle"></span>
                                            <span data-lang="buildownvideochat">Build your own Video Chat</span>
                                        </a>
                                    </div>
                                    <div class="row">
                                        <a target="_blank" href="https://github.com/vgiselbrecht/chat/issues">
                                            <span class="fas fa-bug"></span>
                                            <span data-lang="reportabug">Report a bug</span>
                                        </a>
                                    </div>
                                </div>
                                <div id="systeminfo"> 
                                    <div class="row version">
                                        Version:  {{version}}
                                    </div>
                                    <div class="row imprint" v-show="imprint">
                                        <a v-bind:href="imprint" target="_blank" data-lang="imprint">Imprint</a>
                                    </div>
                                    <div class="row gdpr" v-show="gdpr">
                                        <a v-bind:href="gdpr" target="_blank" data-lang="privacy">Privacy</a>
                                    </div>
                                </div>--><!-- version 표시 -->
                            </div>
                        </div>
                    </div>
                </div>
                <div id="clickbackground"></div>
            </div>
        </div>
        <div id="lightbox" v-on:dblclick="closeLightbox" v-bind:class="{'open': !closed}"> <!-- 모르겠음 아마도 얼굴 조그맣게 나오는 창?-->
            <img id="lightboxImageElement"  :src="src" v-bind:class="{'active': mode == 'image'}">
            <video id="lightboxVideoElement" controls autoplay :src="src" v-bind:class="{'active': mode == 'video'}"></video>
            <span class="close fas fa-times" v-on:click="closeLightbox"></span>
        </div>
        <div id="create-room" v-bind:class="{'show': showDialog}"> <!-- 방 만드는 창 -->
            <div class="create-room-inner">
                <form v-on:submit.prevent="createRoom">
                    <div class="title">{{title}}</div> <!-- Video Chat -->
                    <div class="message" data-lang="createaroom">Create a room</div>
                    <div class="room-input"> <!-- 방 이름 쓰는 칸 -->
                        <input autofocus type="text"  
                        :placeholder="[[roomNameLabel]]" 
                        v-model="roomName"
                        @keydown.enter.exact.prevent
                        @keyup.enter.exact="createRoom">
                        <button type="button" v-on:click="setRandomName" class="fas fa-random"></button>
                    </div>
                    <div class="button-area"> <!-- 방 만들기 버튼 -->
                        <button type="submit" data-lang="create" class="button">Create</button>
                    </div>
                    <div class="bottomlinks">
                        <span class="imprint" v-show="imprint">
                            <a v-bind:href="imprint" target="_blank" data-lang="imprint">Imprint</a>
                        </span>
                        <span v-show="imprint && gdpr"> | </span>
                        <span class="gdpr" v-show="gdpr">
                            <a v-bind:href="gdpr" target="_blank" data-lang="privacy">Privacy</a>
                        </span>
                    </div>
                </form>
            </div>
        </div>
      </body>
</html>
